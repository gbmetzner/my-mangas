angular.module("myMangas",["ngRoute","ui.bootstrap","publisher.controllers","publisher.services","publisher.routes","collection.controllers","collection.services","collection.routes"]),angular.module("collection.controllers",["collection.services","publisher.services","ngDialog"]).controller("NewCollectionController",["$scope","CollectionService","PublisherService",function(e,t,n){e.alerts=[],e.getPublishers=function(e){return n.findByName(e).then(function(e){return e.data.items.map(function(e){return e.name})})},e.legend="Add New Collection",e.save=function(n){e.collectionForm.$valid&&t.save(n).then(function(t){e.reset(),e.alerts.push({type:"success",msg:t.data.msg})},function(t){e.alerts.push({type:"warning",msg:t.data.msg})})},e.reset=function(){e.collection={publisher:"",name:"",searchParam:"",isComplete:!1}},e.closeAlert=function(t){e.alerts.splice(t,1)}}]).controller("ListCollectionController",["$scope","$timeout","CollectionService","ngDialog",function(e,t,n,l){var i="";e.alerts=[];var o;e.$watch("name",function(e){e&&(o&&t.cancel(o),o=t(function(){i=e,alert(i),r(1,0)},350))}),e.openRemoveDialog=function(t){e.collectionToRemove=t,l.openConfirm({template:"removeCollectionTemplate",className:"ngdialog-theme-default",scope:e}).then(function(t){n.remove(t).then(function(t){r(e.bigCurrentPage,e.itemsPerPage*(e.bigCurrentPage-1)),e.alerts.push({type:"success",msg:t.data.msg})},function(t){e.alerts.push({type:"warning",msg:t.data.msg})})},function(){})};var r=function(t,l){e.itemsPerPage=10,e.maxSize=5,e.bigCurrentPage=t,n.paginate({name:i,limit:e.itemsPerPage,skip:l}).then(function(t){e.items=t.data.items,e.bigTotalItems=t.data.totalRecords},function(e){})};e.setPage=function(t){e.bigCurrentPage=t},e.pageChanged=function(){r(e.bigCurrentPage,e.itemsPerPage*(e.bigCurrentPage-1))},r(1,0),e.closeAlert=function(t){e.alerts.splice(t,1)}}]).controller("UpdateCollectionController",["$scope","$routeParams","CollectionService",function(e,t,n){e.alerts=[],e.legend="Update Collection";var l=null,i=function(){n.edit(t.id).then(function(t){e.collection=t.data.collection,l=angular.copy(e.collection)},function(t){e.alerts.push({type:"warning",msg:t.data.msg})})};i(),e.save=function(t){e.collectionForm.$valid&&n.update(t).then(function(t){l=angular.copy(e.collection),e.alerts.push({type:"success",msg:t.data.msg})},function(t){e.alerts.push({type:"warning",msg:t.data.msg})})},e.reset=function(){i()},e.closeAlert=function(t){e.alerts.splice(t,1)}}]),angular.module("publisher.controllers",["publisher.services","ngDialog"]).controller("NewPublisherController",["$scope","PublisherService",function(e,t){e.alerts=[],e.legend="Add New Publisher",e.save=function(n){e.publisherForm.$valid&&t.save(n).then(function(t){e.reset(),e.alerts.push({type:"success",msg:t.data.msg})},function(t){e.alerts.push({type:"warning",msg:t.data.msg})})},e.reset=function(){e.publisher={name:""}},e.closeAlert=function(t){e.alerts.splice(t,1)}}]).controller("ListPublisherController",["$scope","$route","$timeout","PublisherService","ngDialog",function(e,t,n,l,i){var o="";e.alerts=[];var r;e.$watch("name",function(e){e&&(r&&n.cancel(r),r=n(function(){o=e,s(1,0)},350))}),e.openRemoveDialog=function(t){e.publisherToRemove=t,i.openConfirm({template:"removePublisherTemplate",className:"ngdialog-theme-default",scope:e}).then(function(t){l.remove(t).then(function(t){s(e.bigCurrentPage,e.itemsPerPage*(e.bigCurrentPage-1)),e.alerts.push({type:"success",msg:t.data.msg})},function(t){e.alerts.push({type:"warning",msg:t.data.msg})})},function(){})};var s=function(t,n){e.itemsPerPage=10,e.maxSize=5,e.bigCurrentPage=t,l.paginate({name:o,limit:e.itemsPerPage,skip:n}).then(function(t){e.items=t.data.items,e.bigTotalItems=t.data.totalRecords},function(e){})};e.setPage=function(t){e.bigCurrentPage=t},e.pageChanged=function(){s(e.bigCurrentPage,e.itemsPerPage*(e.bigCurrentPage-1))},s(1,0),e.closeAlert=function(t){e.alerts.splice(t,1)}}]).controller("UpdatePublisherController",["$scope","$routeParams","PublisherService",function(e,t,n){e.alerts=[],e.legend="Update Publisher";var l=null,i=function(){n.edit(t.id).then(function(t){e.publisher=t.data.publisher,l=angular.copy(e.publisher)},function(t){e.alerts.push({type:"warning",msg:t.data.msg})})};i(),e.save=function(t){e.publisherForm.$valid&&n.update(t).then(function(t){l=angular.copy(e.publisher),e.alerts.push({type:"success",msg:t.data.msg})},function(t){e.alerts.push({type:"warning",msg:t.data.msg})})},e.reset=function(){i()},e.closeAlert=function(t){e.alerts.splice(t,1)}}]),angular.module("collection.routes",["collection.controllers"]).config(["$routeProvider","$locationProvider",function(e,t){e.when("/views/collection",{templateUrl:"/assets/partials/collections/collection.html",controller:"NewCollectionController"}).when("/views/collections",{templateUrl:"/assets/partials/collections/collections.html",controller:"ListCollectionController"}).when("/views/collection/:id/edit",{templateUrl:"/assets/partials/collections/collection.html",controller:"UpdateCollectionController"}),t.html5Mode({enabled:!0,requireBase:!1})}]),angular.module("publisher.routes",["publisher.controllers"]).config(["$routeProvider","$locationProvider",function(e,t){e.when("/views/publisher",{templateUrl:"/assets/partials/publishers/publisher.html",controller:"NewPublisherController"}).when("/views/publishers",{templateUrl:"/assets/partials/publishers/publishers.html",controller:"ListPublisherController"}).when("/views/publisher/:id/edit",{templateUrl:"/assets/partials/publishers/publisher.html",controller:"UpdatePublisherController"}),t.html5Mode({enabled:!0,requireBase:!1})}]),angular.module("collection.services",[]).factory("CollectionService",["$http",function(e){var t=function(t,n){return e({method:"POST",data:n,headers:{"Content-Type":"application/json"},url:t})},n=function(t,n){return e({method:"PUT",data:n,headers:{"Content-Type":"application/json"},url:t})},l=function(t){return e({method:"GET",headers:{"Content-Type":"application/json"},url:t})},i=function(t){return e({method:"DELETE",headers:{"Content-Type":"application/json"},url:t})};return{save:function(e){return t("/api/collections",e)},edit:function(e){return l("/api/collections/"+e+"/edit")},update:function(e){return n("/api/collections/"+e.id,e)},remove:function(e){return i("/api/collections/"+e)},paginate:function(e){var t="/api/collections/search?";return null!==e.limit&&(t=t+"limit="+e.limit),null!==e.skip&&(t=t+"&skip="+e.skip),""!==e.name&&(t=t+"&name="+e.name),l(t)}}}]),angular.module("publisher.services",[]).factory("PublisherService",["$http",function(e){var t=function(t,n){return e({method:"POST",data:n,headers:{"Content-Type":"application/json"},url:t})},n=function(t,n){return e({method:"PUT",data:n,headers:{"Content-Type":"application/json"},url:t})},l=function(t){return e({method:"GET",headers:{"Content-Type":"application/json"},url:t})},i=function(t){return e({method:"DELETE",headers:{"Content-Type":"application/json"},url:t})};return{save:function(e){return t("/api/publishers",e)},edit:function(e){return l("/api/publishers/"+e+"/edit")},update:function(e){return n("/api/publishers/"+e.id,e)},remove:function(e){return i("/api/publishers/"+e)},findByName:function(e){return l("/api/publishers/search?name="+e+"&limit=10&skip=0")},paginate:function(e){var t="/api/publishers/search?";return null!==e.limit&&(t=t+"limit="+e.limit),null!==e.skip&&(t=t+"&skip="+e.skip),""!==e.name&&(t=t+"&name="+e.name),l(t)}}}]);